{
  "imports": [
    "github.com/project-flogo/flow",
    "github.com/project-flogo/contrib/activity/noop",
    "github.com/mmussett/extensions/SSH/activity/run",
    "github.com/tibco/flogo-general/src/app/General/activity/log",
    "github.com/tibco/flogo-general/src/app/General/trigger/startuphook",
    "github.com/mmussett/extensions/SSH/connector/connection"
  ],
  "name": "ssh",
  "description": "",
  "version": "1.0.0",
  "type": "flogo:app",
  "appModel": "1.1.1",
  "tags": [],
  "triggers": [
    {
      "ref": "#startuphook",
      "name": "tibco-appstartup",
      "description": "This trigger allows you to execute flows before other triggers in the application are started. This is useful in initializing application specific tasks.",
      "settings": {},
      "id": "AppStartupTrigger",
      "handlers": [
        {
          "description": "",
          "action": {
            "ref": "github.com/project-flogo/flow",
            "settings": {
              "flowURI": "res://flow:SampleFlow"
            }
          },
          "name": "SampleFlow"
        }
      ]
    }
  ],
  "resources": [
    {
      "id": "flow:SampleFlow",
      "data": {
        "name": "SampleFlow",
        "description": "",
        "links": [
          {
            "id": 1,
            "from": "StartActivity",
            "to": "SSHRun",
            "type": "label",
            "label": "StartActivity to SSHRun"
          },
          {
            "id": 2,
            "from": "SSHRun",
            "to": "LogMessage",
            "type": "label",
            "label": "SSHRun to LogMessage"
          },
          {
            "id": 3,
            "from": "SSHRun",
            "to": "LogMessage1",
            "type": "error",
            "label": "SSHRun to LogMessage1"
          }
        ],
        "tasks": [
          {
            "id": "StartActivity",
            "name": "StartActivity",
            "description": "NoOp Activity",
            "activity": {
              "ref": "#noop"
            }
          },
          {
            "id": "SSHRun",
            "name": "SSHRun",
            "description": "This activity executes run operation on a SSH server",
            "settings": {
              "retryOnError": {
                "count": 0,
                "interval": 0
              }
            },
            "activity": {
              "ref": "#run",
              "input": {
                "SSH Connection": "conn://f7570c09-9e06-4658-8eab-97408965569f",
                "cmd": "ps -elf"
              }
            }
          },
          {
            "id": "LogMessage",
            "name": "LogMessage",
            "description": "Simple Log Message Activity",
            "activity": {
              "ref": "#log",
              "input": {
                "Log Level": "INFO",
                "flowInfo": false,
                "message": "=$activity[SSHRun].stdOut",
                "logLevel": ""
              }
            }
          },
          {
            "id": "LogMessage1",
            "name": "LogMessage1",
            "description": "Simple Log Message Activity",
            "activity": {
              "ref": "#log",
              "input": {
                "Log Level": "ERROR",
                "flowInfo": false,
                "message": "=$error[SSHRun].message",
                "logLevel": ""
              }
            }
          }
        ],
        "fe_metadata": "eyJTdGFydEFjdGl2aXR5Ijp7IngiOjEwMCwieSI6MTAwfSwiU1NIUnVuIjp7IngiOjI1OCwieSI6ODl9LCJMb2dNZXNzYWdlIjp7IngiOjUxMSwieSI6OTB9LCJMb2dNZXNzYWdlMSI6eyJ4Ijo0MjEsInkiOjI0MX19",
        "metadata": {
          "input": [],
          "output": [],
          "fe_metadata": {}
        }
      }
    }
  ],
  "properties": [
    {
      "name": "SSH.SSH.Host",
      "type": "string",
      "value": "192.168.0.10"
    },
    {
      "name": "SSH.SSH.Port",
      "type": "float64",
      "value": 22
    },
    {
      "name": "SSH.SSH.User_Name",
      "type": "string",
      "value": "mmussett"
    },
    {
      "name": "SSH.SSH.Password",
      "type": "string",
      "value": "SECRET:VWVifWBAHyndEiqhhw7Kt3o27eLGyEfnXA=="
    },
    {
      "name": "SSH.SSH.Connection_Retry_Count",
      "type": "float64",
      "value": 3
    },
    {
      "name": "SSH.SSH.Connection_Retry_Interval",
      "type": "float64",
      "value": 20
    }
  ],
  "connections": {
    "f7570c09-9e06-4658-8eab-97408965569f": {
      "id": "f7570c09-9e06-4658-8eab-97408965569f",
      "name": "SSH",
      "ref": "#connection",
      "isGlobal": false,
      "settings": {
        "name": "SSH",
        "description": "SSH",
        "host": "=$property[\"SSH.SSH.Host\"]",
        "port": "=$property[\"SSH.SSH.Port\"]",
        "user": "=$property[\"SSH.SSH.User_Name\"]",
        "password": "=$property[\"SSH.SSH.Password\"]",
        "retryCount": "=$property[\"SSH.SSH.Connection_Retry_Count\"]",
        "retryInterval": "=$property[\"SSH.SSH.Connection_Retry_Interval\"]",
        "publicKeyFlag": false,
        "privateKey": "",
        "privateKeyPassword": "",
        "hostKeyFlag": false,
        "knownHostFile": ""
      }
    }
  },
  "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS90aWJjby9mbG9nby1nZW5lcmFsL3NyYy9hcHAvR2VuZXJhbCIsImlkIjoiR2VuZXJhbCIsInZlcnNpb24iOiIxLjYuNyIsInRhZyI6IjEuNi43LWIwMyIsIm5hbWUiOiJHZW5lcmFsIiwiczNsb2NhdGlvbiI6IlRpYmNvL0dlbmVyYWwiLCJpc1VzZXJFeHRlbnNpb24iOmZhbHNlfSx7InJlZiI6ImdpdGh1Yi5jb20vbW11c3NldHQvZXh0ZW5zaW9ucy9TU0giLCJpZCI6IlNTSCIsInZlcnNpb24iOiIxLjAuMCIsInRhZyI6IjEuMC4wIiwibmFtZSI6IlNTSCIsInMzbG9jYXRpb24iOiJ7VVNFUklEfS9TU0giLCJpc1VzZXJFeHRlbnNpb24iOnRydWV9XQ==",
  "metadata": {
    "endpoints": [],
    "flogoVersion": "2.25.7"
  }
}